# 20250711 Developing Day 5
## 1. Make login.html under new package auth
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Login Form</title>
</head>
<body>
<h1>Login</h1>
<form action="/auth/login" method="post">
    ID: <input type="text" name="userId"><br>
    PWD: <input type="password" name="userPass"><br>
    <button>Sign up</button>
</form>
</body>
</html>

## 2. Change login.html
(Now)

    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>HEADER - ë¡œê·¸ì¸ í˜ì´ì§€</title>
        <style>
            body {
                font-family: Arial, sans-serif;
                margin: 0;
                padding: 0;
                background-color: #f0f2f5;
                display: flex;
                flex-direction: column;
                min-height: 100vh;
            }
            .header-top {
                background-color: #fff;
                padding: 15px 20px;
                box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                display: flex;
                justify-content: space-between;
                align-items: center;
            }
            .header-top h1 {
                margin: 0;
                color: #333;
                font-size: 24px;
            }
            .main-content {
                flex-grow: 1;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                padding: 20px;
            }
            .login-container, .button-container {
                background-color: #fff;
                padding: 40px;
                border-radius: 8px;
                box-shadow: 0 4px 8px rgba(0,0,0,0.1);
                width: 100%;
                max-width: 400px;
                text-align: center;
                margin-bottom: 20px;
            }
            .login-container h2 {
                margin-bottom: 30px;
                color: #333;
            }
            .input-group {
                margin-bottom: 20px;
            }
            .input-group label {
                display: block;
                margin-bottom: 5px;
                color: #555;
                text-align: left;
            }
            .input-group input {
                width: calc(100% - 20px);
                padding: 12px 10px;
                border: 1px solid #ddd;
                border-radius: 4px;
                font-size: 16px;
            }
            .login-button {
                width: 100%;
                padding: 12px 0;
                background-color: #5b68ad; /* Adjusted color for better contrast */
                color: white;
                border: none;
                border-radius: 4px;
                font-size: 18px;
                cursor: pointer;
                transition: background-color 0.3s ease;
            }
            .login-button:hover {
                background-color: #4a548c;
            }
            .links {
                margin-top: 15px;
                font-size: 14px;
            }
            .links a {
                color: #5b68ad;
                text-decoration: none;
                margin: 0 10px;
            }
            .links a:hover {
                text-decoration: underline;
            }
            .button-grid {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 20px;
                margin-top: 40px;
            }
            .role-button {
                background-color: #f5f5f5;
                border: 1px solid #ddd;
                border-radius: 8px;
                padding: 20px;
                cursor: pointer;
                transition: all 0.3s ease;
                text-align: center;
            }
            .role-button:hover {
                background-color: #e0e0e0;
                box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }
            .role-button img {
                width: 80px;
                height: 80px;
                margin-bottom: 15px;
            }
            .role-button span {
                display: block;
                font-size: 18px;
                color: #333;
                font-weight: bold;
            }
            .footer {
                background-color: #333;
                color: #ccc;
                padding: 20px;
                font-size: 12px;
                text-align: center;
                width: 100%;
                box-sizing: border-box;
                line-height: 1.6;
            }
            .footer a {
                color: #ccc;
                text-decoration: none;
                margin: 0 5px;
            }
            .footer a:hover {
                text-decoration: underline;
            }
            .footer-links {
                margin-bottom: 10px;
            }
            .footer-address {
                margin-top: 10px;
            }
            .login-page-title {
                width: 100%;
                max-width: 400px;
                text-align: left;
                margin-top: 20px; /* Adjust as needed */
                font-size: 20px;
                color: #555;
                font-weight: bold;
            }
            .error-message {
                color: red;
                margin-bottom: 10px;
            }
        </style>
    </head>
    <body>
    <header class="header-top">
        <h1>&lt;HEADER&gt;</h1>
    </header>
    
    <div class="main-content">
        <div id="role-selection" class="button-container">
            <header class="header-top">
                <h1>&lt;HEADER&gt;</h1>
            </header>
            <div class="button-grid">
                <div class="role-button" onclick="showLoginPage('admin')">
                    <img src="https://via.placeholder.com/80/5b68ad/ffffff?text=âœ‚ï¸" alt="ê´€ë¦¬ì ì•„ì´ì½˜">
                    <span>ê´€ë¦¬ì í˜ì´ì§€</span>
                </div>
                <div class="role-button" onclick="showLoginPage('customer')">
                    <img src="https://via.placeholder.com/80/5b68ad/ffffff?text=ğŸ’‡â€â™€ï¸" alt="ê³ ê° ì•„ì´ì½˜">
                    <span>ê³ ê° í˜ì´ì§€</span>
                </div>
            </div>
        </div>

        <div id="login-form" class="login-container" style="display: none;">
            <h2></h2> <p class="error-message" id="login-error"></p>
            <form id="loginForm">
                <div class="input-group">
                    <input type="text" id="username" placeholder="ì•„ì´ë””" required>
                </div>
                <div class="input-group">
                    <input type="password" id="password" placeholder="ë¹„ë°€ë²ˆí˜¸" required>
                </div>
                <button type="submit" class="login-button">LOGIN</button>
            </form>
            <div class="links">
                    <span id="register-link-wrapper" style="display: none;">
                        <a href="#" onclick="alert('íšŒì›ê°€ì… í˜ì´ì§€ë¡œ ì´ë™'); return false;">íšŒì›ê°€ì…</a> |
                    </span>
                <a href="#" onclick="alert('ì•„ì´ë”” ì°¾ê¸° í˜ì´ì§€ë¡œ ì´ë™'); return false;">ì•„ì´ë”” ì°¾ê¸°</a> |
                <a href="#" onclick="alert('ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸° í˜ì´ì§€ë¡œ ì´ë™'); return false;">ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°</a>
            </div>
        </div>
        <h3 class="login-page-title" id="login-page-title-text" style="display: none;">ë¡œê·¸ì¸ í˜ì´ì§€</h3>
    </div>
    
    <footer class="footer">
        <div class="footer-links">
            <a href="#">ì´ìš©ì•½ê´€</a> |
            <a href="#">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a> |
            <a href="#">ì´ë©”ì¼ë¬´ë‹¨ìˆ˜ì§‘ê±°ë¶€</a> |
            <a href="#">ì‚¬ì´íŠ¸ë§µ</a> |
            <a href="#">ì†Œìƒê³µì¸íšŒ</a>
        </div>
        <div class="footer-address">
            <p>ì„œìš¸íŠ¹ë³„ì‹œ ì†¡íŒŒêµ¬ 24/7ì±…ë°©ë¡œ 000ë²ˆê¸¸ 00-00 0ì¸µ | ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸: 000-00-00000 | ëŒ€í‘œ: HEADER | FAX: 02-000-0000</p>
            <p>CopyrightÂ© 2025. ë·°í‹°ë¯¸ìš©ì¸ì¬ê°œë°œ(ì£¼) TEAM HEADER. All rights reserved.</p>
        </div>
    </footer>
    
    <script>
        let selectedRole = '';
    
        function showLoginPage(role) {
            selectedRole = role;
            document.getElementById('role-selection').style.display = 'none';
            document.getElementById('login-form').style.display = 'block';
            document.getElementById('login-page-title-text').style.display = 'block';
    
            const loginFormTitle = document.querySelector('#login-form h2');
            const registerLinkWrapper = document.getElementById('register-link-wrapper');
            const loginError = document.getElementById('login-error');
            loginError.textContent = ''; // Clear previous errors
    
            if (role === 'admin') {
                loginFormTitle.textContent = 'ê´€ë¦¬ì ë¡œê·¸ì¸';
                registerLinkWrapper.style.display = 'none'; // ê´€ë¦¬ìëŠ” íšŒì›ê°€ì… ì—†ìŒ
            } else { // customer
                loginFormTitle.textContent = 'ê³ ê° ë¡œê·¸ì¸';
                registerLinkWrapper.style.display = 'inline'; // ê³ ê°ì€ íšŒì›ê°€ì… ê°€ëŠ¥
            }
        }
    
        document.getElementById('loginForm').addEventListener('submit', async function(event) {
            event.preventDefault(); // í¼ ì œì¶œì˜ ê¸°ë³¸ ë™ì‘ ë°©ì§€
    
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const loginError = document.getElementById('login-error');
            loginError.textContent = ''; // Clear previous errors
    
            console.log(`Attempting login as ${selectedRole}: ${username}/${password}`);
    
            try {
                const response = await fetch('/api/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ username, password, role: selectedRole })
                });
    
                if (response.ok) {
                    const data = await response.json();
                    console.log('Login successful!', data);
                    // ì‹¤ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” ì„œë²„ë¡œë¶€í„° ë°›ì€ ì„¸ì…˜ ì •ë³´ ë˜ëŠ” ì„±ê³µ ë©”ì‹œì§€ ì²˜ë¦¬
                    alert(`ë¡œê·¸ì¸ ì„±ê³µ! ${selectedRole === 'admin' ? 'ê´€ë¦¬ì' : 'ê³ ê°'} í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.`);
                    // ì„±ê³µ ì‹œ í•´ë‹¹ ì—­í• ì˜ ëŒ€ì‹œë³´ë“œ í˜ì´ì§€ë¡œ ë¦¬ë””ë ‰ì…˜
                    window.location.href = `/${selectedRole}/dashboard`;
                } else {
                    const errorData = await response.json();
                    console.error('Login failed:', errorData.message);
                    loginError.textContent = errorData.message || 'ë¡œê·¸ì¸ ì‹¤íŒ¨. ì‚¬ìš©ì ì´ë¦„ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.';
                }
            } catch (error) {
                console.error('Network error during login:', error);
                loginError.textContent = 'ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.';
            }
        });
    </script>
    </body>
    </html>

(Before)

    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Login Form</title>
    </head>
    <body>
    <h1>Login</h1>
    <form action="/auth/login" method="post">
        ID: <input type="text" name="userId"><br>
        PWD: <input type="password" name="userPass"><br>
        <button>Sign up</button>
    </form>
    </body>
    </html>

## 3. Add three *login.html file (not complete)
main-login.html

    <!DOCTYPE html>
    <html lang="ko">
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>HEADER - ë¡œê·¸ì¸ í˜ì´ì§€</title>
      <style>
        body {
          font-family: Arial, sans-serif;
          margin: 0;
          padding: 0;
          background-color: #f2f2f2;
          display: flex;
          flex-direction: column;
          min-height: 100vh;
        }
        .logo {
          width: 243px;
          height: 117px;
        }
        .main-content {
          flex-grow: 1;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: 20px;
        }
        .button-container {
          background-color: #fff;
          padding: 40px;
          border-radius: 15px;
          box-shadow: 0 4px 8px rgba(0,0,0,0.1);
          width: 100%;
          max-width: 600px;
          text-align: center;
          margin-bottom: 20px;
        }
        .input-group {
          margin-bottom: 20px;
        }
        .input-group label {
          display: block;
          margin-bottom: 5px;
          color: #555;
          text-align: left;
        }
        .input-group input {
          width: calc(100% - 20px);
          padding: 12px 10px;
          border: 1px solid #ddd;
          border-radius: 4px;
          font-size: 16px;
        }
        .links a {
          color: #5b68ad;
          text-decoration: none;
        }
        .links a:hover {
          text-decoration: underline;
        }
        .button-grid {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 20px;
          margin-top: 40px;
        }
        .role-button1 {
          background-color: #13183d;
          width: 200px;
          height: 200px;
          border-radius: 15px;
          padding: 40px;
          cursor: pointer;
          transition: all 0.3s ease;
          text-align: center;
        }
        .role-button2 {
          background-color: #8588A2;
          border-radius: 15px;
          padding: 20px;
          cursor: pointer;
          transition: all 0.3s ease;
          text-align: center;
        }
        .role-button:hover {
          background-color: #000000;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .role-button img {
          width: 130px;
          height: 150px;
          margin-bottom: 10px;
        }
        .role-button p {
          display: block;
          font-size: 20px;
          color: #ffffff;
          font-weight: bold;
        }
        .footer {
          background-color: #f2f2f2;
          color: #000000;
          padding: 20px;
          font-size: 12px;
          text-align: center;
          width: 100%;
          box-sizing: border-box;
          line-height: 1.6;
        }
        .footer a {
          color: #000000; /* Adjusted link color */
          text-decoration: none;
          margin: 0 5px;
        }
        .footer a:hover {
          text-decoration: underline;
        }
        .footer-links {
          margin-bottom: 10px;
        }
        .footer-address {
          margin-top: 10px;
        }
        .login-page-title {
          width: 100%;
          max-width: 400px;
          text-align: left;
          margin-top: 20px;
          font-size: 20px;
          color: #555;
          font-weight: bold;
        }
        .error-message {
          color: red;
          margin-bottom: 10px;
        }
      </style>
    </head>
    <body>
    
    <div class="main-content">
      <div id="role-selection" class="button-container">
      <img src="/static/header_logo.png" alt="HEADER Logo" class="logo">
        <div class="button-grid">
          <div class="role-button role-button1">
            <img src="/static/admin_vector.png" alt="ê´€ë¦¬ì ì•„ì´ì½˜" onclick="redirectToLogin('admin')">
            <p>ê´€ë¦¬ì í˜ì´ì§€ë¡œ</p>
          </div>
          <div class="role-button role-button2">
            <img src="/static/userpage-button.png" alt="ê³ ê° ì•„ì´ì½˜"  onclick="redirectToLogin('customer')">
          </div>
        </div>
      </div>
    </div>
    
    <footer class="footer">
      <div class="footer-links">
        <a href="#">ì´ìš©ì•½ê´€</a> |
        <a href="#">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a> |
        <a href="#">ì´ë©”ì¼ë¬´ë‹¨ìˆ˜ì§‘ê±°ë¶€</a> |
        <a href="#">ì‚¬ì´íŠ¸ë§µ</a> |
        <a href="#">ì†Œìƒê³µì¸íšŒ</a>
      </div>
      <div class="footer-address">
        <p>ì„œìš¸íŠ¹ë³„ì‹œ ì†¡íŒŒêµ¬ 24/7ì±…ë°©ë¡œ 000ë²ˆê¸¸ 00-00 0ì¸µ | ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸: 000-00-00000 | ëŒ€í‘œ: HEADER | FAX: 02-000-0000</p> [cite: 44]
        <p>CopyrightÂ© 2025. ë·°í‹°ë¯¸ìš©ì¸ì¬ê°œë°œ(ì£¼) TEAM HEADER. All rights reserved.</p>
      </div>
    </footer>
    
    <script>
      function redirectToLogin(role) {
        if (role === 'admin') {
          window.location.href = '/admin/login';
        } else if (role === 'customer') {
          window.location.href = '/customer/login';
        }
      }
    </script>
    </body>
    </html>

admin-login.html

    <!DOCTYPE html>
    <html lang="ko">
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>HEADER - ê´€ë¦¬ì ë¡œê·¸ì¸</title>
      <style>
        body {
          font-family: Arial, sans-serif;
          margin: 0;
          padding: 0;
          background-color: #f2f2f2; /* Updated background color [cite: 2] */
          display: flex;
          flex-direction: column;
          min-height: 100vh;
        }
        .header-top {
          background-color: #fff;
          padding: 15px 20px;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
          display: flex;
          justify-content: space-between;
          align-items: center;
        }
        .header-top h1 {
          margin: 0;
          color: #333;
          font-size: 24px;
          display: flex;
          align-items: center;
          gap: 10px; /* Space between logo and text */
        }
        .header-top h1 img {
          height: 30px; /* Adjust logo size as needed */
        }
        .main-content {
          flex-grow: 1;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: 20px;
        }
        .login-container {
          background-color: #fff;
          padding: 40px;
          border-radius: 8px;
          box-shadow: 0 4px 8px rgba(0,0,0,0.1);
          width: 100%;
          max-width: 400px;
          text-align: center;
          margin-bottom: 20px;
        }
        .login-container h2 {
          margin-bottom: 30px;
          color: #333;
        }
        .input-group {
          margin-bottom: 20px;
        }
        .input-group label {
          display: block;
          margin-bottom: 5px;
          color: #555;
          text-align: left;
        }
        .input-group input {
          width: calc(100% - 20px);
          padding: 12px 10px;
          border: 1px solid #ddd;
          border-radius: 4px;
          font-size: 16px;
        }
        .login-button {
          width: 100%;
          padding: 12px 0;
          background-color: #5b68ad; /* Adjusted color for better contrast [cite: 16] */
          color: white;
          border: none;
          border-radius: 4px;
          font-size: 18px;
          cursor: pointer;
          transition: background-color 0.3s ease;
        }
        .login-button:hover {
          background-color: #4a548c;
        }
        .links {
          margin-top: 15px;
          font-size: 14px;
          display: flex; /* Apply flexbox for alignment */
          justify-content: flex-end; /* Align items to the right for admin */
          width: 100%;
        }
        .links a {
          color: #5b68ad;
          text-decoration: none;
        }
        .links a:hover {
          text-decoration: underline;
        }
        .footer {
          background-color: #f2f2f2; /* Updated background color [cite: 29] */
          color: #555; /* Adjusted text color for readability on light background */
          padding: 20px;
          font-size: 12px;
          text-align: center;
          width: 100%;
          box-sizing: border-box;
          line-height: 1.6;
        }
        .footer a {
          color: #555; /* Adjusted link color */
          text-decoration: none;
          margin: 0 5px;
        }
        .footer a:hover {
          text-decoration: underline;
        }
        .footer-links {
          margin-bottom: 10px;
        }
        .footer-address {
          margin-top: 10px;
        }
        .login-page-title {
          width: 100%;
          max-width: 400px;
          text-align: left;
          margin-top: 20px;
          font-size: 20px;
          color: #555;
          font-weight: bold;
        }
        .error-message {
          color: red;
          margin-bottom: 10px;
        }
      </style>
    </head>
    <body>
    <header class="header-top">
      <h1>
        <img src="/static/header_logo.png" alt="HEADER Logo"> &lt;HEADER&gt;
      </h1>
    </header>
    
    <div class="main-content">
      <div id="login-form" class="login-container">
        <h2>ê´€ë¦¬ì ë¡œê·¸ì¸</h2>
        <p class="error-message" id="login-error"></p>
        <form id="loginForm">
          <div class="input-group">
            <input type="text" id="username" placeholder="ì•„ì´ë””" required>
          </div>
          <div class="input-group">
            <input type="password" id="password" placeholder="ë¹„ë°€ë²ˆí˜¸" required>
          </div>
          <button type="submit" class="login-button">LOGIN</button>
        </form>
        <div class="links">
                    <span class="find-links">
                        <a href="#" onclick="alert('ì•„ì´ë”” ì°¾ê¸° í˜ì´ì§€ë¡œ ì´ë™'); return false;">ì•„ì´ë”” ì°¾ê¸°</a> |
                        <a href="#" onclick="alert('ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸° í˜ì´ì§€ë¡œ ì´ë™'); return false;">ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°</a>
                    </span>
        </div>
      </div>
    </div>
    
    <footer class="footer">
      <div class="footer-links">
        <a href="#">ì´ìš©ì•½ê´€</a> |
        <a href="#">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a> |
        <a href="#">ì´ë©”ì¼ë¬´ë‹¨ìˆ˜ì§‘ê±°ë¶€</a> |
        <a href="#">ì‚¬ì´íŠ¸ë§µ</a> |
        <a href="#">ì†Œìƒê³µì¸íšŒ</a>
      </div>
      <div class="footer-address">
        <p>ì„œìš¸íŠ¹ë³„ì‹œ ì†¡íŒŒêµ¬ 24/7ì±…ë°©ë¡œ 000ë²ˆê¸¸ 00-00 0ì¸µ | ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸: 000-00-00000 | ëŒ€í‘œ: HEADER | FAX: 02-000-0000</p> [cite: 44]
        <p>CopyrightÂ© 2025. ë·°í‹°ë¯¸ìš©ì¸ì¬ê°œë°œ(ì£¼) TEAM HEADER. All rights reserved.</p>
      </div>
    </footer>
    
    <script>
      // ì´ í˜ì´ì§€ëŠ” í•­ìƒ 'admin' ì—­í• ì„ ê°€ì •í•©ë‹ˆë‹¤.
      const selectedRole = 'admin';
    
      document.getElementById('loginForm').addEventListener('submit', async function(event) {
        event.preventDefault(); // í¼ ì œì¶œì˜ ê¸°ë³¸ ë™ì‘ ë°©ì§€
    
        const username = document.getElementById('username').value;
        const password = document.getElementById('password').value;
        const loginError = document.getElementById('login-error');
        loginError.textContent = ''; // Clear previous errors
    
        console.log(`Attempting login as ${selectedRole}: ${username}/${password}`);
    
        try {
          const response = await fetch('/api/login', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({ username, password, role: selectedRole })
          });
    
          if (response.ok) {
            const data = await response.json();
            console.log('Login successful!', data);
            // ì‹¤ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” ì„œë²„ë¡œë¶€í„° ë°›ì€ ì„¸ì…˜ ì •ë³´ ë˜ëŠ” ì„±ê³µ ë©”ì‹œì§€ ì²˜ë¦¬ [cite: 50]
            alert(`ë¡œê·¸ì¸ ì„±ê³µ! ê´€ë¦¬ì í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.`); [cite: 51]
            // ì„±ê³µ ì‹œ í•´ë‹¹ ì—­í• ì˜ ëŒ€ì‹œë³´ë“œ í˜ì´ì§€ë¡œ ë¦¬ë””ë ‰ì…˜ [cite: 52]
            window.location.href = `/admin/dashboard`;
          } else {
            const errorData = await response.json(); [cite: 53]
            console.error('Login failed:', errorData.message); [cite: 53]
            loginError.textContent = errorData.message || 'ë¡œê·¸ì¸ ì‹¤íŒ¨. ì‚¬ìš©ì ì´ë¦„ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.'; [cite: 54]
          }
        } catch (error) {
          console.error('Network error during login:', error); [cite: 55]
          loginError.textContent = 'ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.'; [cite: 55]
        }
      });
    </script>
    </body>
    </html>

user-login.html

    <!DOCTYPE html>
    <html lang="ko">
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>HEADER - ë¡œê·¸ì¸ í˜ì´ì§€</title>
      <style>
          body {
              font-family: Arial, sans-serif;
              margin: 0;
              padding: 0;
              background-color: #f2f2f2;
              display: flex;
              flex-direction: column;
              min-height: 100vh;
          }
          .header-top {
              background-color: #fff;
              padding: 15px 20px;
              box-shadow: 0 2px 4px rgba(0,0,0,0.1);
              display: flex;
              justify-content: space-between;
              align-items: center;
          }
          .header-top img {
              width: 162px;
              height: 78px;
          }
          .main-content {
              flex-grow: 1;
              display: flex;
              flex-direction: column;
              align-items: center;
              justify-content: center;
              padding: 20px;
          }
          .login-container, .button-container {
              background-color: #fff;
              padding: 40px;
              border-radius: 8px;
              box-shadow: 0 4px 8px rgba(0,0,0,0.1);
              width: 100%;
              max-width: 400px;
              text-align: center;
              margin-bottom: 20px;
          }
          .login-container h2 {
              margin-bottom: 30px;
              color: #333;
          }
          .input-group {
              margin-bottom: 20px;
          }
          .input-group label {
              display: block;
              margin-bottom: 5px;
              color: #555;
              text-align: left;
          }
          .input-group input {
              width: calc(100% - 20px);
              padding: 12px 10px;
              border: 1px solid #ddd;
              border-radius: 4px;
              font-size: 16px;
          }
          .login-button {
              width: 100%;
              padding: 12px 0;
              background-color: #5b68ad; /* Adjusted color for better contrast */
              color: white;
              border: none;
              border-radius: 4px;
              font-size: 18px;
              cursor: pointer;
              transition: background-color 0.3s ease;
          }
          .login-button:hover {
              background-color: #000000;
          }
          .links {
              margin-top: 15px;
              font-size: 14px;
              display: flex; /* Flexbox ì‚¬ìš© */
              justify-content: space-between; /* ì–‘ ë ì •ë ¬ */
              width: 100%; /* ë¶€ëª¨ ë„ˆë¹„ì— ë§ì¶¤ */
          }
          .links a {
              color: #5b68ad;
              text-decoration: none;
              /* margin: 0 10px; // ì´ì œ ì´ marginì€ í•„ìš” ì—†ì„ ìˆ˜ ìˆìŒ, í•„ìš”ì— ë”°ë¼ ì¡°ì • */
          }
          .links a:hover {
              text-decoration: underline;
          }
       /* ì•„ì´ë”” ì°¾ê¸°/ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸° ê·¸ë£¹ì— ëŒ€í•œ ìŠ¤íƒ€ì¼ */
      .links .find-links {
          /* í•„ìš”ì— ë”°ë¼ ì¶”ê°€ ìŠ¤íƒ€ì¼ë§ */
      }
      .button-grid {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 20px;
          margin-top: 40px;
      }
      .role-button {
          background-color: #f5f5f5;
          border: 1px solid #ddd;
          border-radius: 8px;
          padding: 20px;
          cursor: pointer;
          transition: all 0.3s ease;
          text-align: center;
      }
      .role-button:hover {
          background-color: #000000;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
        .role-button img {
            width: 80px;
            height: 80px;
            margin-bottom: 15px;
        }
        .role-button span {
            display: block;
            font-size: 18px;
            color: #333;
            font-weight: bold;
        }
        .footer {
            background-color: #f2f2f2;
            color: #000000;
            padding: 20px;
            font-size: 12px;
            text-align: center;
            width: 100%;
            box-sizing: border-box;
            line-height: 1.6;
        }
        .footer a {
            color: #000000;
            text-decoration: none;
            margin: 0 5px;
        }
        .footer a:hover {
            text-decoration: underline;
        }
        .footer-links {
            margin-bottom: 10px;
        }
        .footer-address {
            margin-top: 10px;
        }
        .login-page-title {
            width: 100%;
            max-width: 400px;
            text-align: left;
            margin-top: 20px; /* Adjust as needed */
            font-size: 20px;
            color: #555;
            font-weight: bold;
        }
        .error-message {
            color: red;
            margin-bottom: 10px;
        }
    </style>
    </head>
    <body>
    <header class="header-top">
        <img src="/static/header_logo.png">
    </header>
    
    
    <script>
        <div id="login-form" className="login-container" style="display: none;">
            <h2></h2> <p className="error-message" id="login-error"></p>
            <form id="loginForm">
                <div className="input-group">
                    <input type="text" id="username" placeholder="ì•„ì´ë””" required/>
                </div>
                <div className="input-group">
                    <input type="password" id="password" placeholder="ë¹„ë°€ë²ˆí˜¸" required/>
                </div>
                <button type="submit" className="login-button">LOGIN</button>
            </form>
            <div className="links">
                    <span id="register-link-wrapper" style="display: none;">
                        <a href="#" onClick="alert('íšŒì›ê°€ì… í˜ì´ì§€ë¡œ ì´ë™'); return false;">íšŒì›ê°€ì…</a> |
                    </span>
                <a href="#" onClick="alert('ì•„ì´ë”” ì°¾ê¸° í˜ì´ì§€ë¡œ ì´ë™'); return false;">ì•„ì´ë”” ì°¾ê¸°</a> |
                <a href="#" onClick="alert('ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸° í˜ì´ì§€ë¡œ ì´ë™'); return false;">ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°</a>
            </div>
        </div>
        let selectedRole = '';
    
        function showLoginPage(role) {
            selectedRole = role;
            document.getElementById('role-selection').style.display = 'none';
            document.getElementById('login-form').style.display = 'block';
            document.getElementById('login-page-title-text').style.display = 'block';
    
            const loginFormTitle = document.querySelector('#login-form h2');
            const registerLinkWrapper = document.getElementById('register-link-wrapper');
            const loginError = document.getElementById('login-error');
            loginError.textContent = ''; // Clear previous errors
    
            if (role === 'admin') {
                loginFormTitle.textContent = 'ê´€ë¦¬ì ë¡œê·¸ì¸';
                registerLinkWrapper.style.display = 'none'; // ê´€ë¦¬ìëŠ” íšŒì›ê°€ì… ì—†ìŒ
            } else { // customer
                loginFormTitle.textContent = 'ê³ ê° ë¡œê·¸ì¸';
                registerLinkWrapper.style.display = 'inline'; // ê³ ê°ì€ íšŒì›ê°€ì… ê°€ëŠ¥
            }
        }
    
        document.getElementById('loginForm').addEventListener('submit', async function (event) {
            event.preventDefault(); // í¼ ì œì¶œì˜ ê¸°ë³¸ ë™ì‘ ë°©ì§€
    
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const loginError = document.getElementById('login-error');
            loginError.textContent = ''; // Clear previous errors
    
            console.log(`Attempting login as ${selectedRole}: ${username}/${password}`);
    
            try {
                const response = await fetch('/api/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({username, password, role: selectedRole})
                });
    
                if (response.ok) {
                    const data = await response.json();
                    console.log('Login successful!', data);
                    // ì‹¤ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” ì„œë²„ë¡œë¶€í„° ë°›ì€ ì„¸ì…˜ ì •ë³´ ë˜ëŠ” ì„±ê³µ ë©”ì‹œì§€ ì²˜ë¦¬
                    alert(`ë¡œê·¸ì¸ ì„±ê³µ! ${selectedRole === 'admin' ? 'ê´€ë¦¬ì' : 'ê³ ê°'} í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.`);
                    // ì„±ê³µ ì‹œ í•´ë‹¹ ì—­í• ì˜ ëŒ€ì‹œë³´ë“œ í˜ì´ì§€ë¡œ ë¦¬ë””ë ‰ì…˜
                    window.location.href = `/${selectedRole}/dashboard`;
                } else {
                    const errorData = await response.json();
                    console.error('Login failed:', errorData.message);
                    loginError.textContent = errorData.message || 'ë¡œê·¸ì¸ ì‹¤íŒ¨. ì‚¬ìš©ì ì´ë¦„ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.';
                }
            } catch (error) {
                console.error('Network error during login:', error);
                loginError.textContent = 'ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.';
            }
        });
    </script>
    </body>
    <footer class="footer">
        <div class="footer-links">
            <a href="#">ì´ìš©ì•½ê´€</a> |
            <a href="#">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a> |
            <a href="#">ì´ë©”ì¼ë¬´ë‹¨ìˆ˜ì§‘ê±°ë¶€</a> |
            <a href="#">ì‚¬ì´íŠ¸ë§µ</a> |
            <a href="#">ì†Œìƒê³µì¸íšŒ</a>
        </div>
        <div class="footer-address">
            <p>ì„œìš¸íŠ¹ë³„ì‹œ ì†¡íŒŒêµ¬ 24/7ì±…ë°©ë¡œ 000ë²ˆê¸¸ 00-00 0ì¸µ | ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸: 000-00-00000 | ëŒ€í‘œ: HEADER | FAX: 02-000-0000</p>
            <p>CopyrightÂ© 2025. ë·°í‹°ë¯¸ìš©ì¸ì¬ê°œë°œ(ì£¼) TEAM HEADER. All rights reserved.</p>
        </div>
    </footer>
    </html>


## 4. Move auth package under header. (before: under domain)

## 5. SecurityService sample code for study
Reference : https://drg2524.tistory.com/148

    package com.header.header.config;

    import org.slf4j.LoggerFactory;
    import org.springframework.beans.factory.annotation.Autowired;
    import org.springframework.context.annotation.Bean;
    import org.springframework.context.annotation.Configuration;
    import org.springframework.security.authentication.dao.DaoAuthenticationProvider;
    import org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;
    import org.springframework.security.config.annotation.web.builders.HttpSecurity;
    import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
    import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;
    import org.springframework.security.web.SecurityFilterChain;
    import org.springframework.security.web.authentication.AuthenticationFailureHandler;
    
    import java.util.logging.Logger;
    
    @Configuration
    @EnableWebSecurity
    @EnableGlobalMethodSecurity(prePostEnabled = true)
    public class SecurityConfig {
    private static final Logger logger = LoggerFactory.getLogger(SecurityConfig.class);

        @Autowired
        private PrincipalDetailsService principalDetails;
    
        // security ë¡œê·¸ì¸ ì‹¤íŒ¨ í•¸ë“¤ëŸ¬ DI
        @Autowired
        private AuthenticationFailureHandler customFailHandler;
    
        @Autowired
        private BCryptPasswordEncoder encodePwd;
    
        @Bean
        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
            return http
                    .csrf() // csrf ì„ ì–¸  = ì–´ë””ì— ì“¸êº¼ì•¼ ?
                    .ignoringAntMatchers("/uploadSummernoteImageFile")
                    .ignoringAntMatchers("/user/**")
                    .ignoringAntMatchers("/auth/**")
                    .ignoringAntMatchers("/admin/**")// csrf token Post 403 error Exception filter
                    .and()
                    .authorizeRequests()
                    .antMatchers("/include/**", "/temcss/**", "temjs/**").permitAll()
                    .antMatchers("/").authenticated()
                    .antMatchers("/admin/**").access("hasRole('ROLE_ADMIN')")
                    .antMatchers("/manager/**").access("hasRole('ROLE_MANAGER') or hasRole('ROLE_ADMIN')")
                    .anyRequest().permitAll()
                    .and()
                    .formLogin()// ë‚˜ëŠ” í¼ ë¡œê·¸ì¸ì„ ì‚¬ìš©í• ê±°ì•¼ !
                    .loginPage("/auth/login") // ê·¼ë° ë‚œ ë¡œê·¸ì¸ í¼ì´ ìˆì–´  ì´ ê²½ë¡œì•¼ !
                    .usernameParameter("userid") // ê·¼ë° ë‚œ usernameì´ë¼ê³  ì„ ì–¸ ì•ˆí•´. ë³„ë„ë¡œ  name ì„ ì–¸ í–ˆì–´
                    .passwordParameter("pwd") // ë™ì¼í•´
                    .loginProcessingUrl("/auth/login") // security login // ë¡œê·¸ì¸ ìš”ì²­ ë“¤ì–´ì™”ì–´ !! true / false ?
                    .failureHandler(customFailHandler) // login Fail // false
                    .defaultSuccessUrl("/") // true
                    .and()
                    .logout()
                    .logoutSuccessUrl("/")
                    .invalidateHttpSession(true) // HTTP session reset
                    .and()
                    .build();
    
        }
    
        @Bean
        public DaoAuthenticationProvider daoAuthenticationProvider() {
            DaoAuthenticationProvider authenticationProvider = new DaoAuthenticationProvider();
            authenticationProvider.setUserDetailsService(principalDetails);
            authenticationProvider.setPasswordEncoder(encodePwd);
            authenticationProvider.setHideUserNotFoundExceptions(false);
    
            return authenticationProvider;
        }
    }

## 6. Copy and paste AuthFailHandler from 'spring-security lecture source' and edit
    package com.header.header.auth.authconfig;
    
    import jakarta.servlet.ServletException;
    import jakarta.servlet.http.HttpServletRequest;
    import jakarta.servlet.http.HttpServletResponse;
    import org.springframework.context.annotation.Configuration;
    import org.springframework.security.authentication.AuthenticationCredentialsNotFoundException;
    import org.springframework.security.authentication.BadCredentialsException;
    import org.springframework.security.authentication.InternalAuthenticationServiceException;
    import org.springframework.security.core.AuthenticationException;
    import org.springframework.security.core.userdetails.UsernameNotFoundException;
    import org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler;
    
    import java.io.IOException;
    import java.net.URLEncoder;
    
    @Configuration
    public class AuthFailHandler extends SimpleUrlAuthenticationFailureHandler {
    //ì¸ì¦ ì‹¤íŒ¨ ì‹œì˜ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ í•˜ëŠ”  method
    @Override
    public void onAuthenticationFailure(HttpServletRequest request, HttpServletResponse response, AuthenticationException exception) throws IOException, ServletException {
    String errorMessage ="";
    if(exception instanceof BadCredentialsException){
    errorMessage = "ì•„ì´ë””ê°€ ì—†ê±°ë‚˜ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.";
    
            } else if (exception instanceof InternalAuthenticationServiceException) {
                errorMessage = "ì„œë²„ì—ì„œ ì˜¤ë¥˜ ë°œìƒ. ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜ ìš”ë§";
                
            } else if (exception instanceof UsernameNotFoundException) {
                errorMessage ="ì—†ëŠ” IDì…ë‹ˆë‹¤.";
    
            } else if(exception instanceof AuthenticationCredentialsNotFoundException){
                errorMessage="ì¸ì¦ìš”ì²­ì´ ê±°ë¶€ë˜ì—ˆìŠµë‹ˆë‹¤";
    
            } else {
                errorMessage="ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ë¡œ ë¡œê·¸ì¸ ìš”ì²­ ì²˜ë¦¬ ë¶ˆê°€";
            }
    
            errorMessage= URLEncoder.encode(errorMessage, "UTF-8");
            
            setDefaultFailureUrl("/auth/fail?message=" +errorMessage);
    
            super.onAuthenticationFailure(request, response,exception);
        }
    }

## 7. Copy & paste UserRole from lecture source

    package com.header.header.auth.common;

    public enum UserRole {
        //ì—´ê±°íƒ€ì… enum = ìƒìˆ˜ì˜ ì§‘í•©
        //ê´€ë ¨ ìƒìˆ˜ë“¤ì„ ì§‘í•©ìœ¼ë¡œ ê°–ê³  ìˆëŠ” ê²ƒì´ enum type
    
        // userì™€ ì‚¬ìš©ìì˜ ê¶Œí•œì— ëŒ€í•œ ê°’ì„ ì—¬ê¸°ì„œ ìƒìˆ˜ë¡œ ë°›ì•„ì¤„ ê²ƒì„
        USER("USER"),
        ADMIN("ADMIN");
    
        private String role;
    
        UserRole(String role) {
            // ìƒì„±ì. UserRole() ì•ì— publicì´ ìƒëµë˜ì–´ìˆìŒ
            this.role=role;
        }
    
        public String getRole() {
            return role;
        } //ë‚´(?)ê°€ ê°–ê³  ìˆëŠ” role ì •ë³´ë¥¼ getRoleë¡œ êº¼ë‚´ì˜¨ë‹¤
    
        @Override
        public String toString() {
            return "UserRole{" +
                    "role='" + role + '\'' +
                    '}';
        }
    }

### 7-1. Attach some codes in AuthService to divide ADMIN / USER
    @Override
    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {
    User user = userRepository.findByUserId(username)
    .orElseThrow(() -> new UsernameNotFoundException("ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."));

        List<GrantedAuthority> authorities = new ArrayList<>();
        if (user.isAdmin()) {
            authorities.add(new SimpleGrantedAuthority("ROLE_ADMIN"));
        } else {
            authorities.add(new SimpleGrantedAuthority("ROLE_USER"));
        }

        return new org.springframework.security.core.userdetails.User(
                user.getUserId(),
                user.getUserPwd(),
                authorities
        );
    }

## 8. Insert a line into the AuthDetails
    private AuthUserRepository authUserRepository;

## 9. Create new constructor in AuthDetails
public AuthDetails(String userId, String userPwd, List<GrantedAuthority> authorities) {
}

## 10. Reform SecurityConfiguration
(Now)
    
    @Bean
    public SecurityFilterChain configure(HttpSecurity http) throws Exception {
        /* ìš”ì²­ì— ëŒ€í•œ ê¶Œí•œAuthority ì²´í¬ */
        http.authorizeHttpRequests( auth -> {
            auth.requestMatchers("/auth/login/*", "/user/signup", "/auth/fail", "/", "/main").permitAll();
            // auth/login ë“± ìœ„ì˜ 5ê°€ì§€ í˜ì´ì§€ëŠ” ê¶Œí•œì´ ì—†ì–´ë„ ë³¼ ìˆ˜ ìˆë‹¤ëŠ” ê³µí†µì ì´ ìˆë‹¤.
            // ê·¸ë ‡ê¸° ë•Œë¬¸ì— 'ê¶Œí•œì´ ì—†ì–´ë„ ëª¨ë“  ì‚¬ìš©ìë“¤ì´ ì ‘ê·¼ ê°€ëŠ¥í•©ë‹ˆë‹¤'ë¥¼ í•¨ì˜í•´ì£¼ëŠ”
            // .permitAll()ì„ ë„£ì–´ì¤€ë‹¤. (=ëª¨ë“  ì‚¬ìš©ìê°€ ì ‘ê·¼í•˜ê²Œ í—ˆìš©í•´ì£¼ê² ë‹¤)
            auth.requestMatchers("/admin/**").hasRole("ADMIN");
            auth.requestMatchers("/user/**").hasRole("USER");
            auth.anyRequest().authenticated();

(Before)

    @Bean
    public SecurityFilterChain configure(HttpSecurity http) throws Exception {
        /* ìš”ì²­ì— ëŒ€í•œ ê¶Œí•œAuthority ì²´í¬ */
        http.authorizeHttpRequests( auth -> {
            auth.requestMatchers("/auth/login/*", "/user/signup", "/auth/fail", "/", "/main").permitAll();
            // auth/login ë“± ìœ„ì˜ 5ê°€ì§€ í˜ì´ì§€ëŠ” ê¶Œí•œì´ ì—†ì–´ë„ ë³¼ ìˆ˜ ìˆë‹¤ëŠ” ê³µí†µì ì´ ìˆë‹¤.
            // ê·¸ë ‡ê¸° ë•Œë¬¸ì— 'ê¶Œí•œì´ ì—†ì–´ë„ ëª¨ë“  ì‚¬ìš©ìë“¤ì´ ì ‘ê·¼ ê°€ëŠ¥í•©ë‹ˆë‹¤'ë¥¼ í•¨ì˜í•´ì£¼ëŠ”
            // .permitAll()ì„ ë„£ì–´ì¤€ë‹¤. (=ëª¨ë“  ì‚¬ìš©ìê°€ ì ‘ê·¼í•˜ê²Œ í—ˆìš©í•´ì£¼ê² ë‹¤)
            auth.requestMatchers("/admin/*").hasAnyAuthority();
            auth.requestMatchers("/user/*").hasAnyAuthority();
            auth.anyRequest().authenticated();
