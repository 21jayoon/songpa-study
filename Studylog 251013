# Javascript mission
//1. Article.js
// In JS, the class recommended in seperate js files.
//JSì—ì„œëŠ” í´ë˜ìŠ¤ë¥¼ ê°ê° ë‹¤ë¥¸ íŒŒì¼ì— ì €ì¥í•´ì„œ ì‚¬ìš©í•˜ê¸¸ ê¶Œì¥í•œë‹¤.
/* Conditions:
class í‚¤ì›Œë“œë¥¼ ì´ìš©í•´ì„œ Article í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ ì£¼ì„¸ìš”.
Article í´ë˜ìŠ¤ëŠ” title(ì œëª©), content(ë‚´ìš©), writer(ì‘ì„±ì), likeCount(ì¢‹ì•„ìš” ìˆ˜) í”„ë¡œí¼í‹°ë¥¼ ê°€ì§‘ë‹ˆë‹¤.
Article í´ë˜ìŠ¤ëŠ” like methodë¥¼ ê°€ì§‘ë‹ˆë‹¤. like ë©”ì†Œë“œê°€ í˜¸ì¶œë  ê²½ìš° ì¢‹ì•„ìš” ìˆ˜ê°€ 1 ì¦ê°€í•©ë‹ˆë‹¤.

250927
Article ìš”ì²­ í•¨ìˆ˜ êµ¬í˜„í•˜ê¸° (ì‹¬í™”)
Article í´ë˜ìŠ¤ì— createdAt(ìƒì„±ì¼ì) í”„ë¡œí¼í‹°ë¥¼ ë§Œë“¤ì–´ ì£¼ì„¸ìš”. (ìƒˆë¡œìš´ ê°ì²´ê°€ ìƒì„±ë˜ì–´ constructorê°€ í˜¸ì¶œë  ì‹œ createdAtì— í˜„ì¬ ì‹œê°„ì„ ì €ì¥í•©ë‹ˆë‹¤.)
-> classì— í”„ë¡œí¼í‹°ë¥¼ ë§Œë“¤ë¼ëŠ” ê²Œ ê¼­ constructorì˜ í•„ë“œë¡œ ë„£ì–´ì•¼í•œë‹¤ëŠ” ê±°ëŠ” ì•„ë‹ˆêµ¬ë‚˜.
ê°•ì‚¬ë‹˜ê»˜ ì—¬ì­¤ë´¤ë”ë‹ˆ ëª¨ë²” ë‹µì•ˆì€ ìœ ë¯¸ë‹˜ì´ í•˜ì‹ ëŒ€ë¡œ
constructor(title, content, writer, likeCount){
  this.title=title;
  ......
  this.createdAt=new Date();
}
ë¼ê³  í•˜ì‹¬.
ê°•ì‚¬ë‹˜ ì™ˆ í™•ì‹¤í•œ ì •ë‹µ í•˜ë‚˜ê°€ ìˆëŠ” ê±´ ì•„ë‹ˆë¼ê³  ìƒê°,
ê´€ì ì´ ì°¨ì´ì¼ ë¿. ë‚´ê°€ í•œ ë°©ì‹ì€
constructor(title, content, writer, likeCount, createdAt){
    this.title=title;
    this.content=content;
    this.writer=writer;
    this.likeCount=likeCount;
    this.createdAt=createdAt;
  }
createdAtì— ë“¤ì–´ê°ˆ ê°’ì„ ì„œë²„ì— ë§¡ê¸´(?) ì¢€ ë” ìœ ì—°í•œ ë°©ì‹ì´ë¼ê³  í•˜ì…¨ê³ 
ìœ ë¯¸ë‹˜ì´ í•˜ì‹  ë°©ì‹ì€ createdAtì„ í™•ì •ì ì´ê³  ëª…ì‹œì ìœ¼ë¡œ,
ìˆ˜ì •ë˜ê±°ë‚˜ ë°”ë€” ìˆ˜ ì—†ê²Œ ë§Œë“  ë²„ì „ì´ë¼ê³  í•˜ì‹¬. 13:18
ê·¼ë° ì¡°ê±´ ìƒê°í•˜ë©´ ìœ ë¯¸ë‹˜ê»˜ ë§ëŠ” ê±° ê°™ì•„ì„œ ë‚´ ì½”ë“œ ìˆ˜ì •í•¨ 251002 13:26
*/
class Article{
  constructor(title, content, writer, likeCount){
    this.title=title;
    this.content=content;
    this.writer=writer;
    this.likeCount=likeCount;
    this.createdAt=new Date();
  }
  like(){
    let addLike = this.likeCount +1;
    return addLike;
  }
}

//2. Product.js
// In JS, the class recommended in seperate js files.
//JSì—ì„œëŠ” í´ë˜ìŠ¤ë¥¼ ê°ê° ë‹¤ë¥¸ íŒŒì¼ì— ì €ì¥í•´ì„œ ì‚¬ìš©í•˜ê¸¸ ê¶Œì¥í•œë‹¤.
//ë”°ë¼ì„œ Product.js, ElectronicProduct.jsë¥¼ ë§Œë“¤ì–´ì„œ ê° íŒŒì¼ì—
// ê° í´ë˜ìŠ¤ë¥¼ ì˜®ê²¨ì™”ë‹¤.
export class Product{
  constructor(name, description, price, tags, images, favoriteCount){
    this.name= name;
    this.description=description;
    this.price= price;
    this.tags=tags;
    this.images=images;
    this.favoriteCount=favoriteCount ?? 0;
    //ì™œ this.favoriteCount=favoriteCount; ì‚­ì œí•˜ê³  favoriteCount=0;í•˜ë©´ 
    // main.jsì—ì„œ favoriteCountê°€ ì•ˆ ëœ°ê¹Œ? 1002 16:23
  }

  /**Conditions:
   * Product class has the method 'favorite'.
   * When the favorite is called, the number of 'liked' increases by 1
   * Product í´ë˜ìŠ¤ëŠ” favorite ë©”ì†Œë“œë¥¼ ê°€ì§‘ë‹ˆë‹¤. 
   * favorite ë©”ì†Œë“œê°€ í˜¸ì¶œë  ê²½ìš° ì°œí•˜ê¸° ìˆ˜ê°€ 1 ì¦ê°€í•©ë‹ˆë‹¤.
   */
  // favoriteì´ë¼ëŠ” ì´ë¦„ì„ ê°€ì§„ method ì •ì˜
  /**  ë§¤ê°œë³€ìˆ˜ê°€ í•„ìš”í• ê¹Œ? Will the parameter needed?
   * No.. Click ì´ë²¤íŠ¸ í•¸ë“¤ë§ì€ í•„ìš”í•  ê±° ê°™ì€ë°, ì›ì‹œ ìë£Œí˜• ë§¤ê°œë³€ìˆ˜ê°€ í•„ìš”í•œì§€ëŠ” ëª¨ë¥´ê² ìŒ
   * I think the eventhandling is needed in favorite method,
   * but I'm not sure about the primitive data types.
   * -> No parameter, just put a formula.
  */ 
  favorite(){
    let liked = this.favoriteCount + 1;
    return liked;
  }
}

//3. ElectronicProduct.js
// In JS, the class recommended in seperate js files.
//JSì—ì„œëŠ” í´ë˜ìŠ¤ë¥¼ ê°ê° ë‹¤ë¥¸ íŒŒì¼ì— ì €ì¥í•´ì„œ ì‚¬ìš©í•˜ê¸¸ ê¶Œì¥í•œë‹¤.
/* 18:40 ê°ê¸° ë‹¤ë¥¸ íŒŒì¼ì—ì„œ í´ë˜ìŠ¤ ìƒì†í•˜ë ¤ë©´ export & import í•„ìˆ˜ë¼ê³  í•œë‹¤.
 * ë”°ë¼ì„œ export & import ì‚¬ìš©
 * I was curious about if the inheritance in different files available,
 * I searched on the internet.
 * It said I must need export and import, 
 * so I add those code in Product.js and E-Product.js.
 * https://stackoverflow.com/questions/59325349/how-can-i-inherit-a-js-class-from-another-js-class-which-are-separate-files
 */
import { Product } from "./Product.js";
/** Conditions:
 * ElectronicProduct í´ë˜ìŠ¤ëŠ” Productë¥¼ ìƒì†í•˜ë©°, 
 * ì¶”ê°€ë¡œ manufacturer(ì œì¡°ì‚¬) í”„ë¡œí¼í‹°ë¥¼ ê°€ì§‘ë‹ˆë‹¤. 
 * The class ElectronicProduct inherit class Product,
 * and has a manufacturer property. */
export class ElectronicProducts extends Product {
  constructor(
    name, description, price, tags, images, favoriteCount, manufacturer
  ){
    //ElectronicProducts classê°€ Product classë¥¼ ìƒì†í–ˆê³  
    //ì¶”ê°€ í”„ë¡œí¼í‹° manufacturerê°€ ìˆê¸° ë•Œë¬¸ì—
    //superë¥¼ í†µí•´ ë¶€ëª¨ ìƒì„±ìë¥¼ í˜¸ì¶œí•˜ëŠ” ê³¼ì •ì´ í•„ìš”í•˜ë‹¤.
    // Since the ElectronicProducts class inheritants Product,
    // and it has new property named 'manufacturer',
    // this class should call the parents constructor with super().
    super(name, description, price, tags, images, favoriteCount);
    this.manufacturer=manufacturer;
  }
}

//4. Articleservice.js
const API_URL = 'https://panda-market-api-crud.vercel.app';

/* The swagger url looks like this,
https://panda-market-api-crud.vercel.app/docs/#/Article/CreateArticle
I was confused from where I should use the endpoint.
`/#/Article/ListArticles` vs `/Article/ListArticles`
So I asked to gemini and got an answer.
Then revise codes with no-# endpoints.
https://g.co/gemini/share/6b23700fe84e
 */
export function getArticleList({ page, pageSize, keyword }) {
  const params = new URLSearchParams({ page, pageSize, keyword});
  // Instead of URLSearchParams, you can use hardcoding with URL like
  // const url = `${API_URL}/articles?page=${page}&pageSize=${pageSize}&keyword=${keyword}`;
  // 251013 10:34
  const url = `${API_URL}/articles/?${params}`;
  
  return fetch(url)
    .then(response => {
      if (!response.ok){
        console.error(`HTTP ì˜¤ë¥˜ ë°œìƒ: ${response.status} (${response.statusText})`);
        throw new Error(`getArtiList Response failed: ${response.status} ${response.statusText}`);
      }
      return response.json(); //responseë¥¼ json í˜•íƒœë¡œ ë°”ê¿”ì„œ ë°›ì•„ì˜¨ë‹¤.
    })
    .then(data => {
      // console.log('articleList:', data); ì´ê±° ì§€ì›Œë„ data ê·¸ëŒ€ë¡œ ì¶œë ¥ë˜ë ¤ë‚˜? 1001 22:51
      return data; //í•„ìš”í•œ ê²½ìš°ë¥¼ ìœ„í•´ data ë°˜í™˜
    })
    .catch(error => {
      console.error(`ArtiList API error `, error);
      throw error;
    });
}

export function getArticle(articleId){
  const url = `${API_URL}/articles/${articleId}`;
  /*fetch() í•¨ìˆ˜ëŠ” method ì˜µì…˜ì„ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ 
  ê¸°ë³¸ê°’ìœ¼ë¡œ GET ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ë„ë¡ ì„¤ê³„ë˜ì–´ ìˆë‹¤.
  ë”°ë¼ì„œ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ëŠ” ì¼ë°˜ì ì¸ GET ìš”ì²­ì˜ ê²½ìš°,
  {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify(newArticle)
  } ì´ëŸ° ë¶€ë¶„ í•„ìš” ì—†ì´
  ì•„ë˜ì™€ ê°™ì´ ì½”ë“œë¥¼ ê°„ê²°í•˜ê²Œ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.
  */
  return fetch(url)
    .then(response => {
      if (!response.ok){
        console.error(`HTTP error: ${response.status} (${response.statusText})`);
        throw new Error(`getArti request failed: ${response.status} ${response.statusText}`);
      }
      return response.json();
    })
    .then(data => {
      // console.log(data);
      return data;
    })
    .catch(error => {
      console.error('getArti API error: ', error);
    });
}

export function createArticle({title, content, image}) {
  //https://g.co/gemini/share/a845840e327f (createdAt ê´€ë ¨ ì‹¬í™” ë‚´ìš©)
  const url = `${API_URL}/articles`;
  const newArticle = { title, content, image }; 

  return fetch(url, {
    method: 'POST', // HTTP ë©”ì†Œë“œë¥¼ POSTë¡œ ì§€ì •
    headers: {
      'Content-Type': 'application/json', // ë³´ë‚´ëŠ” ë°ì´í„° í˜•ì‹ì„ JSONìœ¼ë¡œ ì§€ì •
    },
    body: JSON.stringify(newArticle) 
    // JavaScript ê°ì²´ë¥¼ stringify ë©”ì†Œë“œë¥¼ í†µí•´ JSON ë¬¸ìì—´ë¡œ ë³€í™˜
  })
   .then(res => {
    if(!res.ok) {
      console.error(`HTTP error: ${res.status} (${res.statusText})`);
      throw new Error(`createArti Failed request: ${res.status} ${res.statusText}`);
    }
    return res.json();
   })
   .then(data => {
    // console.log(data);
    return data;
   })
   .catch(error =>{
    console.error('createArti API error: ', error);
   });
}

export function patchArticle(articleId, updateData) {
  const url = `${API_URL}/articles/${articleId}`;

  return fetch(url, {
    method: 'PATCH',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(updateData)
  })
   .then(res => {
    if(!res.ok){
      throw new Error(`Failed request: ${res.status} ${res.statusText}`);
    }
    return res.json(); // ì„œë²„ ì‘ë‹µì„ JSONìœ¼ë¡œ íŒŒì‹±
   })
   .then(data => {
    return data;
   })
   .catch(error => {
    console.log('patchArti API error: ', error);
    return error;
    //main.jsì—ì„œ í˜¸ì¶œìê°€ .catch()ë¥¼ í†µí•´ ì˜¤ë¥˜ë¥¼ ì²˜ë¦¬í•˜ë„ë¡ ì—ëŸ¬ë¥¼ ë‹¤ì‹œ ë˜ì§„ë‹¤.
   });
}

export function deleteArticle(articleId) {
  const url = `${API_URL}/articles/${articleId}`;

  return fetch(url, {
    method: 'DELETE'
  })
    .then(res => {
      if(!res.ok){
        throw new Error(`Failed request: ${res.status} (${res.statusText})`);
      }
      return res.json();
    })
    .then(data => {
      return data; // ì„œë²„ê°€ ë°˜í™˜í•œ ì„±ê³µ ë©”ì‹œì§€ë‚˜ ê°ì²´ ë°˜í™˜
    })
    .catch(error => {
      console.error(`deleteArti API `, error);
      throw error; //main.jsì—ì„œ í˜¸ì¶œìê°€ .catch()ë¥¼ í†µí•´ ì˜¤ë¥˜ë¥¼ ì²˜ë¦¬í•˜ë„ë¡ ì—ëŸ¬ë¥¼ ë‹¤ì‹œ ë˜ì§„ë‹¤.
    });
}

//5. Productservice.js
// ê³µë¶€ë¥¼ ìœ„í•´ product ê´€ë ¨ í•¨ìˆ˜ì—ì„œëŠ” axios ì‚¬ìš©
/* https://panda-market-api-crud.vercel.app/docs Product APIë¥¼ ì´ìš©í•˜ì—¬ 
ì•„ë˜ í•¨ìˆ˜ë“¤ì„ êµ¬í˜„í•´ ì£¼ì„¸ìš”.
- async/await ì„ ì´ìš©í•˜ì—¬ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ í•´ì£¼ì„¸ìš”.
- êµ¬í˜„í•œ í•¨ìˆ˜ë“¤ì„ ì•„ë˜ì™€ ê°™ì´ íŒŒì¼ì„ ë¶„ë¦¬í•´ ì£¼ì„¸ìš”.
-- exportë¥¼ í™œìš©í•´ ì£¼ì„¸ìš”.
-- ProductService.js íŒŒì¼ Product API ê´€ë ¨ í•¨ìˆ˜ë“¤ì„ ì‘ì„±í•´ ì£¼ì„¸ìš”.
-- ArticleService.js íŒŒì¼ì— Article API ê´€ë ¨ í•¨ìˆ˜ë“¤ì„ ì‘ì„±í•´ ì£¼ì„¸ìš”.
- ì´ì™¸ì˜ ì½”ë“œë“¤ì€ ëª¨ë‘ main.js íŒŒì¼ì— importë¥¼ í™œìš©í•´ì„œ ì‘ì„±í•´ ì£¼ì„¸ìš”.
*/
import axios from "axios";
import { Product } from "./Product.js";
import {ElectronicProducts} from "./ElectronicProduct.js";

const instance = axios.create({
  baseURL: 'https://panda-market-api-crud.vercel.app',
  timeout: 5000
  //timeout: xnnn = xì´ˆ ë‚´ì— ì—°ê²°ì´ ë˜ì§€ ì•Šìœ¼ë©´ error return
});

/* ğŸš¨ getProductList() : GET ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•´ ì£¼ì„¸ìš”.
  -- page, pageSize, keyword ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¥¼ ì´ìš©í•´ ì£¼ì„¸ìš”. */
export async function getProductList({page, pageSize, keyword}){
  // - try/catch ë¥¼ ì´ìš©í•˜ì—¬ ì˜¤ë¥˜ ì²˜ë¦¬ë¥¼ í•´ì£¼ì„¸ìš”.
  /* try and catchëŠ” function ì•ˆì— ë“¤ì–´ê°€ì•¼ ë™ì‘í•œë‹¤.
    ì²˜ìŒì— í–ˆë˜ëŒ€ë¡œ try { export async function ....(){} } catch{}
    ì‹œë„í•˜ë©´ ì˜¤ë¥˜ë‚¨ 251001 22:27
  */
  try{
  const res = await instance.get(`/products`, {
    params: {page, pageSize, keyword}
  });
  /* getProductList()ë¥¼ í†µí•´ì„œ ë°›ì•„ì˜¨ ìƒí’ˆ ë¦¬ìŠ¤íŠ¸ë¥¼ 
  ê°ê° ì¸ìŠ¤í„´ìŠ¤ë¡œ ë§Œë“¤ì–´(-> ì¸ìŠ¤í„´ìŠ¤ë¡œ ë§Œë“¤ì–´= map ë©”ì†Œë“œ ì‚¬ìš©)
  products ë°°ì—´ì— ì €ì¥í•´ ì£¼ì„¸ìš”.
  - í•´ì‹œíƒœê·¸ì— "ì „ìì œí’ˆ"ì´ í¬í•¨ë˜ì–´ ìˆëŠ” ìƒí’ˆë“¤ì€ Product í´ë˜ìŠ¤ ëŒ€ì‹  
  ElectronicProduct í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•´ ì£¼ì„¸ìš”.
  - ë‚˜ë¨¸ì§€ ìƒí’ˆë“¤ì€ ëª¨ë‘ Product í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•´ ì£¼ì„¸ìš”. */
  
  // 1. ìœ„ resë¥¼ í†µí•´ ê°–ê³ ì˜¨ API ë°ì´í„° ì¤‘ì— ì‹¤ì œ ìƒí’ˆ ë¦¬ìŠ¤íŠ¸ ë°°ì—´ì„ ê°€ì ¸ì˜¤ê³ 
  const productList = res.data.list; //res.data;

  //2. map ë©”ì„œë“œë¥¼ í†µí•´ ê° ìƒí’ˆ(item)ì„ Product í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¡œ ë³€í™˜í•œë‹¤.
  const products = productList.map(item =>{
      //ì—¬ê¸°ì„œ foreach ë§ê³  map ì“°ëŠ” ê²Œ ë§ë‚˜?
    if (item.tags.includes("ì „ìì œí’ˆ") || item.tags.includes("ì „ì ì œí’ˆ")) {
      return new ElectronicProducts(
        item.name,
        item.description,
        item.price,
        item.tags,
        item.images,
        item.favortieCount,
        item.manufacturer
      );
      //want: itemì˜ ì†ì„±(key value)ì´ key nameê³¼ ì¼ì¹˜í•˜ëŠ” ê³³ìœ¼ë¡œ ë“¤ì–´ê°
      //real: â­ï¸item ì „ì²´ê°€ ElectronicProductsì˜ ì²«ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ì¸ nameì— ë“¤ì–´ê°â­ï¸
      //need: itemì˜ ê° ì†ì„±ê³¼ ì´ë¦„ì´ ê°™ì€ ElectronicProductsì˜ ê° ë§¤ê°œë³€ìˆ˜ë¥¼ ë§¤ì¹­ì‹œì¼œì£¼ëŠ” ê²ƒ. 15:50 251002
    } else {
      return new Product(
        item.name,
        item.description,
        item.price,
        item.tags,
        item.imgaes,
        item.favortieCount
      );
    }
    });
  //3. ì¸ìŠ¤í„´ìŠ¤ë“¤ë¡œ êµ¬ì„±ëœ ìµœì¢… ë°°ì—´ ë°˜í™˜
    return products;
  } catch(error){
    console.log("getProdL err.stat: ", error.response.status);
    return error.response.data;
/* console.log("getProdL error!", error.data);
    throw error;
    ì‹¤ì œ ì—ëŸ¬ ë°œìƒ ì‹œ ì›ì¸ì„ ë¹ ë¥´ê²Œ íŒŒì•…í•˜ê¸° ìœ„í•´ ìœ„ ì½”ë“œë¥¼ ì‚­ì œí•˜ê³  í˜„ì¬ ì½”ë“œë¡œ ìˆ˜ì •í•˜ì˜€ìŒ
    ì´í›„ ì „ì²´ í•¨ìˆ˜ catch return ê°’ ì¼ê´„ ë³€ê²½
    1009 22:37
    */
  };
}
/* AxiosëŠ” ë¹„ë™ê¸° ìš”ì²­ì„ Promiseë¡œ ì²˜ë¦¬í•˜ê³ , async/awaitë¥¼ ì‚¬ìš©í•˜ë©´ ì´ë¥¼ ë” ê°„ë‹¨í•˜ê²Œ ë‹¤ë£° ìˆ˜ ìˆë‹¤.
ì¡°ê¸ˆ ë” ì •í™•íˆ í‘œí˜„í•´ì•¼ í•´ìš”.
Axios ìì²´ëŠ” ë¹„ë™ê¸°ì ìœ¼ë¡œ ë™ì‘í•´ìš”. (axios.get()ì€ Promiseë¥¼ ë°˜í™˜í•¨)
async/awaitëŠ” ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ë” ì§ê´€ì ì´ê³  ë™ê¸°ì ì¸ ì½”ë“œ ìŠ¤íƒ€ì¼ë¡œ ì‘ì„±í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ë¬¸ë²•ì´ì—ìš”.
ë”°ë¼ì„œ axios + async/awaitë¥¼ ì“°ë©´ ë¹„ë™ê¸° ìš”ì²­ì„ ê¹”ë”í•˜ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆì§€ë§Œ,
"async/awaitë¥¼ ì“°ë©´ ë¹„ë™ê¸°ì²˜ë¦¬ê°€ ëœë‹¤"ëŠ” ì„¤ëª…ì€ ì‚´ì§ ì˜¤í•´ì˜ ì†Œì§€ê°€ ìˆì–´ìš”.

ğŸ“– ë” ì •í™•í•œ ì„¤ëª…:
AxiosëŠ” ë¹„ë™ê¸° HTTP ìš”ì²­ì„ Promise ê¸°ë°˜ìœ¼ë¡œ ì²˜ë¦¬í•œë‹¤.
async/awaitë¥¼ ì‚¬ìš©í•˜ë©´ Axiosì˜ ë¹„ë™ê¸° ìš”ì²­ì„ ë§ˆì¹˜ ë™ê¸° ì½”ë“œì²˜ëŸ¼ ìˆœì°¨ì ìœ¼ë¡œ ë‹¤ë£° ìˆ˜ ìˆë‹¤.
*/

// ğŸš¨ getProduct() : GET ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•´ ì£¼ì„¸ìš”.
export async function getProduct(productId){
  try{
  const response = await instance.get(`/products/${productId}`, )
  return response.data;
  } catch(error){
    cconsole.log("getProd err.stat: ", error.response.status);
    return error.response.data;
  };
}

// ğŸš¨ createProduct() : POST ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•´ ì£¼ì„¸ìš”.
// - request bodyì— {name, description, price, tags, images} ë¥¼ í¬í•¨í•´ ì£¼ì„¸ìš”.
export async function createProduct({name, description, price, tags, images}){
  // ë©”ì†Œë“œì— ìœ ì—°ì„±ì„ ì£¼ê¸° ìœ„í•´ì„œ, ë§¤ê°œë³€ìˆ˜ë¥¼ postì˜ ë‘ ë²ˆì§¸ ì¸ìë¡œ(ë‘ ë²ˆì§¸ ìë¦¬ì—) ì§ì ‘ ë„£ì§€ ì•Šê³  ìƒˆ ë³€ìˆ˜ì— í• ë‹¹í•œ í›„ í•´ë‹¹ ë³€ìˆ˜ë¥¼ ì „ë‹¬í•œë‹¤
  // (êµ¬ì¡°ë¶„í•´í• ë‹¹ ì‚¬ìš©. ê°ì²´ êµ¬ì¡° ë¶„í•´= parameter destructing)
  // For more flexibility, declare new varialbe with the parameters of this method. 1009 21:46
  const newProduct = {name, description, price, tags, images};

  try{
    const res = await instance.post(`/products`, newProduct);
    return res.data;
  } catch(error) {
    console.log("creatPd err.stat: ", error.response.status);
    return error.response.data;
  };
}

// ğŸš¨ patchProduct() : PATCH ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•´ ì£¼ì„¸ìš”.
export async function patchProduct(productId, updates) {
  try{
    const res = await instance.patch(`/products/${productId}`, updates);
    return res.data;
  } catch(error) {
    console.log("patPd err.stat: ", error.response.status);
    return error.response.data;
  }
}

// ğŸš¨ deleteProduct() : DELETE ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•´ ì£¼ì„¸ìš”.
export async function deleteProduct(productId){
  try{
    const res = await instance.delete(`/products/${productId}`);
    return res.data;
  } catch(error) {
    console.log("deltPd err.stat: ", error.response.status);
    return error.response.data;
  }
}
